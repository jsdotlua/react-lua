
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://jsdotlua.github.io/react-lua/migrating-from-legacy/upgrading-to-react-lua/">
      
      
        <link rel="prev" href="../minimum-requirements/">
      
      
        <link rel="next" href="../adopt-new-features/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.47">
    
    
      
        <title>Add React Lua Dependency - React Lua Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#adding-a-react-lua-dependency" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="React Lua Documentation" class="md-header__button md-logo" aria-label="React Lua Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            React Lua Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Add React Lua Dependency
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/jsdotlua/react-lua" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    jsdotlua/react-lua
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="React Lua Documentation" class="md-nav__button md-logo" aria-label="React Lua Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    React Lua Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jsdotlua/react-lua" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    jsdotlua/react-lua
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deviations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deviations
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Migrating From Legacy Roact
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Migrating From Legacy Roact
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../minimum-requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Minimum Requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Add React Lua Dependency
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Add React Lua Dependency
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#new-projects" class="md-nav__link">
    <span class="md-ellipsis">
      New Projects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replacing-legacy-roact" class="md-nav__link">
    <span class="md-ellipsis">
      Replacing Legacy Roact
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Replacing Legacy Roact">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-new-features" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing New Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patching-other-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Patching Other Dependencies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-with-both" class="md-nav__link">
    <span class="md-ellipsis">
      Testing with Both
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adopt-new-features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adopt New Features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../convert-legacy-conventions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Convert Legacy Conventions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api-reference/react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api-reference/react-roblox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReactRoblox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api-reference/roact-compat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RoactCompat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api-reference/additional-libraries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Additional Libraries
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bench/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Benchmarks
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#new-projects" class="md-nav__link">
    <span class="md-ellipsis">
      New Projects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replacing-legacy-roact" class="md-nav__link">
    <span class="md-ellipsis">
      Replacing Legacy Roact
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Replacing Legacy Roact">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessing-new-features" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing New Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#patching-other-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Patching Other Dependencies
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-with-both" class="md-nav__link">
    <span class="md-ellipsis">
      Testing with Both
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="adding-a-react-lua-dependency">Adding a React Lua Dependency<a class="headerlink" href="#adding-a-react-lua-dependency" title="Permanent link">&para;</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This page is written for internal Roblox employees, and makes reference in its entirety to internal tools and workflows you likely do not have access to. If you'd like to rewrite this page with installation instructions relevant to Roblox developers, please see <a href="https://github.com/jsdotlua/react-lua/issues/22">this</a> issue.</p>
</div>
<hr />
<p>React Lua is available as a collection of packages hosted in the https://github.com/jsdotlua/react-lua repository. Internal Roblox projects use a package manager called <a href="https://github.com/roblox/rotriever">Rotriever</a> to resolve and manage dependencies.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>React Lua is a "package workspace", meaning that it consists of multiple packages living in the same project. We recommend using Rotriever version <a href="https://github.com/Roblox/rotriever/releases/tag/v0.5.4">0.5.4</a> or newer to make sure it has the latest workspace feature support.</p>
<p>Refer to <a href="https://roblox.github.io/rotriever/installation/">Rotriever's documentation</a> for more information on how to install or upgrade your version.</p>
</div>
<h2 id="new-projects">New Projects<a class="headerlink" href="#new-projects" title="Permanent link">&para;</a></h2>
<ol>
<li>Make sure you're using rotriever version <code>0.5.4</code> or newer. You can check this by running <code>rotrieve -V</code>.</li>
<li>Add the following to your <code>rotriever.toml</code> manifest file:
    <div class="highlight"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="n">React</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;github.com/roblox/roact-alignment@17.0.1&quot;</span>
<span class="n">ReactRoblox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;github.com/roblox/roact-alignment@17.0.1&quot;</span>
</code></pre></div></li>
<li>Run <code>rotrieve install</code> to install all dependencies</li>
<li><code>React.lua</code> and <code>ReactRoblox.lua</code> will be added to the <code>Packages</code> folder generated by rotriever in your project. Make sure this folder is included in your project when testing with <code>roblox-cli</code> or Roblox Studio.</li>
</ol>
<h2 id="replacing-legacy-roact">Replacing Legacy Roact<a class="headerlink" href="#replacing-legacy-roact" title="Permanent link">&para;</a></h2>
<p>The easiest way to adopt React Lua in an existing Roact project is to change your existing dependency on legacy Roact.</p>
<p>Make the following changes to your <code>rotriever.toml</code> manifest file:
<div class="highlight"><pre><span></span><code>[dependencies]
<span class="gd">- Roact = &quot;github.com/roblox/roact@1.4&quot;</span>
<span class="gi">+ Roact = { target = &quot;github.com/roblox/roact-alignment&quot;, version = &quot;17.0.1&quot;, package = &quot;RoactCompat&quot; }</span>
</code></pre></div></p>
<p>This creates a dependency on the <code>RoactCompat</code> package, which provides <a href="../../api-reference/roact-compat/">a compatibility layer</a> for migrating from legacy APIs.</p>
<p>Since it's still named <code>Roact</code> in the above snippet, it will be aliased to <code>Roact</code> in your code. If your code meets the <a href="../minimum-requirements/">minimum requirements</a>, this dependency change will upgrade your project to React Lua without requiring any further changes to your source code.</p>
<h3 id="accessing-new-features">Accessing New Features<a class="headerlink" href="#accessing-new-features" title="Permanent link">&para;</a></h3>
<p>However, the <code>RoactCompat</code> API only covers enough to provide backwards compatibility. To access new features like hooks or suspense, you will need to add dependencies on <code>React</code> and <code>ReactRoblox</code> as well:
<div class="highlight"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="n">Roact</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;github.com/roblox/roact-alignment&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;17.0.1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;RoactCompat&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="n">React</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;github.com/roblox/roact-alignment@17.0.1&quot;</span>
<span class="n">ReactRoblox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;github.com/roblox/roact-alignment@17.0.1&quot;</span>
</code></pre></div></p>
<p>The <code>RoactCompat</code> package <strong>can be safely mixed and matched</strong> with the new <code>React</code> and <code>ReactRoblox</code> packages; it's nothing more than a thin wrapper around them that aligns with the legacy Roact API and semantics.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Since we're not using an alias for the <code>React</code> and <code>ReactRoblox</code> packages, we can define our dependencies using the shorthand format. Read up on <a href="https://roblox.github.io/rotriever/guide/specifying-dependencies/">specifying Rotriever dependencies</a> for more information.</p>
</div>
<h3 id="patching-other-dependencies">Patching Other Dependencies<a class="headerlink" href="#patching-other-dependencies" title="Permanent link">&para;</a></h3>
<p>You may need to additionally account for other dependencies in your project that use Roact. If you depend on a package that has its <em>own</em> dependency on legacy Roact, you may need to use rotriever's <code>patch</code> feature to replace the legacy version throughout the tree.</p>
<p>You might encounter this if you have existing dependencies on any of the following:</p>
<ul>
<li><a href="https://github.com/Roblox/infinite-scroller">InfiniteScroller</a> (compatible with React Lua from version 0.8.0 onwards)</li>
<li><a href="https://github.com/roblox/roact-fit-components">RoactFitComponents</a> (compatible with React Lua from version 2.0.0 onwards)</li>
<li><a href="https://github.com/Roblox/roact-rodux">RoactRodux</a> (compatible with React Lua from version 0.4.1 onwards)</li>
<li><a href="https://github.com/Roblox/uiblox">UIBlox</a> (compatible with React Lua on the latest master)</li>
<li>Numerous other projects that depend on legacy Roact, especially if they're older than the latest version</li>
</ul>
<p>To resolve this, you can patch over any dependencies on legacy Roact and align them with your newly-added version. Add this additional section to your <code>rotriever.toml</code> manifest file:
<div class="highlight"><pre><span></span><code><span class="k">[config.patch.</span><span class="s2">&quot;github.com/roblox/roact&quot;</span><span class="k">]</span>
<span class="n">Roact</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;github.com/roblox/roact-alignment&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;17.0.1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;RoactCompat&quot;</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></p>
<p>To learn more about patching dependencies, check out <a href="https://roblox.github.io/rotriever/guide/specifying-dependencies/#patching-dependencies">the Rotriever documentation</a>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>When you're patching over Roact, make sure your other dependencies are compatible with React Lua. You may need to upgrade them to more recent versions so that they comply with the <a href="../minimum-requirements/">React Lua requirements</a>.</p>
</div>
<h2 id="testing-with-both">Testing with Both<a class="headerlink" href="#testing-with-both" title="Permanent link">&para;</a></h2>
<p>In some cases, you may not yet be equipped to safely adopt React Lua, but you want to begin adopting it in tests or storybooks so your project can enforce compatibility.</p>
<p>One reasonable way to accomplish this is to depend on <em>both</em> projects, but to conditionally swap in React Lua at runtime. To do this, make sure your <code>rotriever.toml</code> manifest file contains the following:
<div class="highlight"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="n">Roact</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;github.com/roblox/roact@1.4&quot;</span>

<span class="k">[dev_dependencies]</span>
<span class="n">RoactCompat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;github.com/roblox/roact-alignment@17.0.1&quot;</span>
</code></pre></div></p>
<p>This declares a dependency on legacy Roact as well as a <a href="https://roblox.github.io/rotriever/guide/specifying-dependencies/#development-dependencies">dev dependency</a> on React Lua.</p>
<p>In your test runner script or other equivalent entry point, check the value of a global (or flag, or any other preferred configuration method), and overwrite the <code>Roact</code> API with that of <code>RoactCompat</code> when enabled. It may look something like this:</p>
<div class="highlight"><pre><span></span><code><span class="kr">if</span> <span class="n">_G</span><span class="p">.</span><span class="n">__NEW_ROACT__</span> <span class="kr">then</span>
    <span class="kd">local</span> <span class="n">Roact</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="n">Packages</span><span class="p">.</span><span class="n">Roact</span><span class="p">)</span>
    <span class="kd">local</span> <span class="n">RoactCompat</span> <span class="o">=</span> <span class="nb">require</span><span class="p">(</span><span class="n">Packages</span><span class="p">.</span><span class="n">Dev</span><span class="p">.</span><span class="n">RoactCompat</span><span class="p">)</span>

    <span class="c1">-- Overwrite the contents of the `Roact` package with that of the</span>
    <span class="c1">-- RoactCompat package</span>
    <span class="kr">for</span> <span class="n">api</span><span class="p">,</span> <span class="n">_</span> <span class="kr">in</span> <span class="n">Roact</span> <span class="kr">do</span>
        <span class="n">Roact</span><span class="p">[</span><span class="n">api</span><span class="p">]</span> <span class="o">=</span> <span class="n">RoactCompat</span><span class="p">[</span><span class="n">api</span><span class="p">]</span>
    <span class="kr">end</span>
<span class="kr">end</span>

<span class="c1">-- Proceed with test setup...</span>
</code></pre></div>
<p>In the above example, an additional test suite can be created for use with <code>lest</code> or via a <code>robloxdev-cli</code> command line invocation that sets the <code>__NEW_ROACT__</code> global to <code>true</code>.</p>
<p>To see this technique in action, you can find a comprehensive example <a href="https://github.com/Roblox/uiblox/pull/309">in this PR to the UIBlox library</a>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>